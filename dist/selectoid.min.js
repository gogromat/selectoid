!function($){var Selectoid,a=this,b={};$.fn.doesExist=function(){return $(this).length>0},b.toType=function(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},$.each(["Object","Undefined"],function(a,c){b["is"+c]=function(a){return b.toType(a)==c.toLowerCase()}}),b.isJQuery=function(a){return a instanceof jQuery},b.getAndSetId=function(a){var b=0;return a=a||"",function(c){return c.id||(c.id=a+b++),c.id}}("selectoid_"),Selectoid=function(a,c,d){var e=this;e.object=b.isObject(a)?b.isJQuery(a.object)?a.object:$(a.object):b.isJQuery(a)?a:$(a),e.objectId=e.object.attr("id")||b.getAndSetId(e.object.get(0)),e.defaults={select_class:"selectoid_select",button_class:"selectoid_button",holder_class:"selectoid_holder",selectoid:e.objectId,select:e.objectId+"_select",holder:e.objectId+"_holder",button:e.objectId+"_button",item:"item",selected:"selected",hidden:"hidden",secondary:"secondary",widthElement:"body",actions:{responsive:!0,closeOnMouseLeave:!0,closeOnFocusOut:!0,addKeyboardAction:!0,addIdToParameter:!0}};var f=$(e.toId(e.defaults.selectoid));if(e.currentWidth=-1,e.dataFormat=function(a){return{name:a.name,value:a.value}},e.htmlFormat=function(a){return a.name},$.each(e.defaults.actions,function(a,b){e.defaults[a]=b}),e.setNewParametersBasedOnObject(a,c,d),!f.doesExist())throw new Error("Selectoid: no such id found: "+e.defaults.selectoid);return $.each(f.data(),function(a,b){e.defaults[a]=b}),$.each(e.defaults.actions,function(a){var c=e.defaults[a.toLowerCase()];b.isUndefined(c)||(e.defaults[a]=c)}),e.generateSelectBox(),e.generateButtonHtml(),e.generateList(),e.setInitialValues(),e.turnSelectoid(-1),e.setupActions(),e.addIdToParameters()},Selectoid.prototype.setNewParametersBasedOnObject=function(a,c,d){var e=this;b.isObject(a)?($.extend(e.defaults,a.parameters),e.defaults.initial=a.parameters.initial,e.data=a.data,e.dataFormat=a.dataFormat||e.dataFormat,e.htmlFormat=a.htmlFormat||e.htmlFormat,$.each(a.parameters,function(a,b){e.defaults[a]=b})):(e.data=c,e.defaults.initial=d)},Selectoid.prototype.addIdToParameters=function(){return null!=this.defaults.addIdToParameter&&(Selectoid[this.defaults.selectoid]=this),this},Selectoid.prototype.generateSelectBox=function(){var a=this;$(a.toId(a.defaults.selectoid)).append("<select class='"+a.defaults.select_class+"' id='"+a.defaults.select+"'>"+a.generateSelectOptions()+"</select>")},Selectoid.prototype.generateSelectOptions=function(){for(var a="",b=0,c=this.data.length;c>b;b++)a+="<option value='"+this.getValue(b)+"'>"+this.getName(b)+"</option>";return a},Selectoid.prototype.getName=function(a){return $.isNumeric(a)?this.dataFormat(this.data[a]).name:this.dataFormat(a).name},Selectoid.prototype.getValue=function(a){return $.isNumeric(a)?this.dataFormat(this.data[a]).value:this.dataFormat(a).value},Selectoid.prototype.getDataNameByValue=function(a){for(var b=0;b<this.data.length;b++)if(this.getValue(b)==a)return this.getName(b)},Selectoid.prototype.getItemByValue=function(a){var b,c=this;return $.each(c.data,function(d,e){return c.dataFormat(e).value===a?(b=e,void 0):void 0}),b},Selectoid.prototype.getElementWidth=function(){return $(this.defaults.widthElement).width()||$(this.toId(this.defaults.selectoid)).closest(this.defaults.widthElement).width()},Selectoid.prototype.generateList=function(){var a=this,b="<ul class='"+a.defaults.holder_class+" "+a.defaults.hidden+"' id='"+a.defaults.holder+"'>";b+=a.generateListItems(),b+="</ul>",$(a.toId(a.defaults.selectoid)).append(b)},Selectoid.prototype.generateListItems=function(){for(var a="",b=0,c=this.data.length-1;c>=b;b++)a+="<li class='"+this.defaults.item+"' data-name='"+this.getName(b)+"' data-value='"+this.getValue(b)+"' >"+this.htmlFormat(this.data[b])+"</li>";return a},Selectoid.prototype.generateButtonHtml=function(){$(this.toId(this.defaults.selectoid)).append("<button class='"+this.defaults.button_class+"' id='"+this.defaults.button+"'></button>")},Selectoid.prototype.generateCSS=function(){var a=this,b=[{min:0,max:250,columns:1,secondary:!1},{min:251,max:479,columns:1,secondary:!0},{min:480,max:701,columns:2,secondary:!1},{min:702,max:801,columns:2,secondary:!0},{min:802,max:960,columns:3,secondary:!1},{min:961,max:1120,columns:3,secondary:!0}],c=b.length,d=function(){for(var d,e=!1,f=!1,g=a.getElementWidth(),h=0;c>h;h++){if(g>=b[h].min&&g<=b[h].max){d=b[h];break}if(h+1==c&&g>b[h].max){e=!0,d=b[h];break}}a.currentWidth>=d.min&&a.currentWidth<=d.max&&(f=!0),f||($(a.toId(a.defaults.holder)).width(d.min||"100%"),d.secondary?$(a.toClass(a.defaults.secondary)).show():$(a.toClass(a.defaults.secondary)).hide(),$(a.toId(a.defaults.holder)).css({"column-count":d.columns,"-moz-column-count":d.columns,"-webkit-column-count":d.columns})),a.currentWidth=g};a.defaults.responsive&&$(window).resize(function(){d()}),d()},Selectoid.prototype.changeData=function(a,c){var d,e,f=this;b.isObject(a)?f.setNewParametersBasedOnObject(a):f.setNewParametersBasedOnObject("",a,c),d=f.generateSelectOptions(),e=f.generateListItems(),$(f.toId(f.defaults.select)).find("option").remove().end().append(d),$(f.toId(f.defaults.holder)).find("li").remove().end().append(e),this.setInitialValues(),this.setupActions()},Selectoid.prototype.setButtonText=function(a){a=a||this.getCurrentText(),$(this.toId(this.defaults.button)).html(a+"&nbsp;<div class='arrow-down float-right'></div>")},Selectoid.prototype.setupActions=function(){$(this.toId(this.defaults.selectoid)).find("*").off(),this.setSelectoidDefaultActions(),this.setButtonActions(),this.setListActions(),this.generateCSS(),this.defaults.focusOutActions=[],this.defaults.mouseLeaveActions=[],this.setMouseLeaveActions(),this.setFocusOutActions(),this.defaults.addKeyboardAction&&this.setKeyboardAction()},Selectoid.prototype.afterItemWasSelected=function(){var a=this;setTimeout(function(){a.turnSelectoid(-1),$(a.toId(a.defaults.button)).focus()},100)},Selectoid.prototype.turnFocus=function(a){var b=this;$(b.toId(b.defaults.holder)+", "+b.toId(b.defaults.select)).attr({tabIndex:a,tabindex:a})},Selectoid.prototype.turnSelectoid=function(a){var b=this;0>a?($(b.toId(b.defaults.holder)).addClass(b.defaults.hidden),b.setCurrentValues(b.getCurrentValue()),b.turnFocus(-1)):(b.turnFocus(a),$(b.toId(b.defaults.holder)).removeClass(b.defaults.hidden),setTimeout(function(){$(b.toId(b.defaults.button)).focusout(),$(b.toId(b.defaults.holder)).focus()},100))},Selectoid.prototype.setButtonActions=function(){var a=this;$(a.toId(a.defaults.button)).on("click keyup",function(b){return b.keyCode||$(a.toId(a.defaults.holder)).hasClass(a.defaults.hidden)?((!b.keyCode||b.keyCode&&[13,37,38,39,40].indexOf(b.keyCode)>-1)&&a.turnSelectoid(0),void 0):(a.turnSelectoid(-1),!1)})},Selectoid.prototype.setListActions=function(){var a=this,b=a.toId(a.defaults.holder),c=a.toClass(a.defaults.item),d=c+a.toClass(a.defaults.selected);$(a.toId(a.defaults.holder)+" "+c).on("click",function(){$(b+" "+d).removeClass(a.defaults.selected),$(this).addClass(a.defaults.selected);var c=$(this).data();a.setCurrentValues(c.value,c.name),a.setButtonText(),a.afterItemWasSelected()}).mouseover(function(){$(this).addClass(a.defaults.selected)}).mouseleave(function(){a.getCurrentValue()!=$(this).data().value&&$(this).removeClass(a.defaults.selected)})},Selectoid.prototype.setCurrentValues=function(a,b){$(this.toId(this.defaults.select)).val(a),this.currentValue=a,this.currentText=b||this.getDataNameByValue(a)},Selectoid.prototype.getCurrentValue=function(){return this.currentValue},Selectoid.prototype.getCurrentText=function(){return this.currentText},Selectoid.prototype.setMouseLeaveActions=function(){var a=this,b=function(){$(a.toId(a.defaults.holder)).on("mouseleave",function(){a.turnSelectoid(-1)})},c=a.defaults.mouseLeaveActions;a.defaults.closeOnMouseLeave&&c.push(b),$.each(c,function(a,b){b()})},Selectoid.prototype.setFocusOutActions=function(){var a=this,b=function(){$(a.toId(a.defaults.select)).on("focusout",function(){setTimeout(function(){a.turnSelectoid(-1)},100)})},c=a.defaults.focusOutActions;a.defaults.closeOnFocusOut&&c.push(b),$.each(c,function(a,b){b()})},Selectoid.prototype.setSelectoidDefaultActions=function(){var a=this;$(a.toId(a.defaults.holder)).on("focusin",function(){setTimeout(function(){$(a.toId(a.defaults.select)).focus()},100)})},Selectoid.prototype.setKeyboardAction=function(){function a(a){c!=a&&(c=a,b.changeSelectedItem(a))}var b=this,c=b.getCurrentValue();$(b.toId(b.defaults.select)).keydown(function(c){[37,38,39,40].indexOf(c.which)>-1?a($(this).val()):27==c.which&&b.turnSelectoid(-1)}).keyup(function(c){13==c.which?(b.setCurrentValues($(this).val()),b.setButtonText(),b.afterItemWasSelected()):a($(this).val())})},Selectoid.prototype.setInitialValues=function(){var a,b=this,c={};$.each(b.data,function(d,e){b.getValue(d)===b.getCurrentValue()&&(a=e),b.getValue(d)===b.defaults.initial&&(c=e)}),c||(b.defaults.initial=b.getCurrentValue()),c=c||a,b.setButtonText(c.name),b.setCurrentValues(b.defaults.initial),b.changeSelectedItem()},Selectoid.prototype.removeSelectedItemClass=function(){$(this.toId(this.defaults.holder)+" "+this.toClass(this.defaults.item)+this.toClass(this.defaults.selected)).removeClass(this.defaults.selected)},Selectoid.prototype.addSelectedItemClass=function(a){var b=this,c=a||b.getCurrentValue();$(b.toId(b.defaults.holder)+" "+b.toClass(this.defaults.item)+"[data-value="+c+"]").addClass(b.defaults.selected)},Selectoid.prototype.changeSelectedItem=function(a){this.removeSelectedItemClass(),this.addSelectedItemClass(a)},$.each([{name:"Class",value:"."},{name:"Id",value:"#"}],function(a,b){Selectoid.prototype["to"+b.name]=function(a){return b.value+a}}),a.Selectoid=Selectoid}.call(this,jQuery);