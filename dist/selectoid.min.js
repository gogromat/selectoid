!function($,_){var Selectoid,a=this;Selectoid=function(a,b){var c=this;c.setObjectId(_.isObject(a)?a.object.substring(1):a.substr(1)),c.classes={select:"selectoid_select",button:"selectoid_button",holder:"selectoid_holder",itemHolder:"itemHolder",item:"item",selected:"selected",hidden:"hidden"},c.ids={selectoid:c.getObjectId(),select:c.getObjectId()+"_select",holder:c.getObjectId()+"_holder",button:c.getObjectId()+"_button"},c.widths=[{min:0,max:480,holders:1},{min:481,max:800,holders:2},{min:801,max:1/0,holders:3}],c.dataFormat=function(a){return{name:a.name,value:a.value}},c.htmlFormat=function(a){return a.name},_.isObject(a)?(_.extend(c.classes,a.parameters.classes),_.extend(c.ids,a.parameters.ids),c.initial=a.parameters.initial,c.data=a.data,c.width=a.widths||c.widths,c.dataFormat=a.dataFormat||c.dataFormat,c.htmlFormat=a.htmlFormat||c.htmlFormat,c.closeOnMouseLeave=_.isUndefined(a.parameters.mouseLeaveClose)?!0:a.parameters.mouseLeaveClose,c.closeOnFocusOut=_.isUndefined(a.parameters.focusOutClose)?!0:a.parameters.focusOutClose):(c.closeOnMouseLeave=!0,c.closeOnFocusOut=!0,c.data=b),c.generateSelectBox(),c.generateDivBox(),c.generateButton(),c.setInitialValues(),c.setButtonActions(),c.setDivActions(),_.isUndefined(c.closeOnMouseLeave)||c.setDivMouseLeaveAction(),_.isUndefined(c.closeOnFocusOut)||c.setDivFocusOutAction(),_.each(Object.keys(c.ids),function(a){Selectoid.prototype["get"+a.charAt(0).toUpperCase()+a.substring(1)+"Id"]=function(){return c.ids[a]}}),_.each(Object.keys(c.classes),function(a){Selectoid.prototype["get"+a.charAt(0).toUpperCase()+a.substring(1)+"Class"]=function(){return c.ids[a]}})},Selectoid.prototype.setObjectId=function(a){this.objectId=a},Selectoid.prototype.getObjectId=function(){return this.objectId},Selectoid.prototype.generateSelectBox=function(){for(var a=this,b="",c=0,d=a.data.length;d>c;c++)b+="<option value='"+a.getValue(c)+"'>"+a.getName(c)+"</option>";$(a.toId(a.ids.selectoid)).append("<select class='"+a.classes.select+"' id='"+a.ids.select+"'>"+b+"</select>")},Selectoid.prototype.getName=function(a){return _.isNumber(a)?this.dataFormat(this.data[a]).name:this.dataFormat(a).name},Selectoid.prototype.getValue=function(a){return _.isNumber(a)?this.dataFormat(this.data[a]).value:this.dataFormat(a).value},Selectoid.prototype.getItemByValue=function(a){var b,c=this;return _.each(c.data,function(d){return c.dataFormat(d).value===a?(b=d,void 0):void 0}),b},Selectoid.prototype.getWindowWidth=function(){return $(window).width()},Selectoid.prototype.generateDivBox=function(){var a=this,b=a.getWindowWidth(),c=0,d=a.data.length;_.each(a.widths,function(a){b>=a.min&&b<=a.max&&(c=a.holders)}),c>d&&(c=d);for(var e=Math.ceil(d/c),f=0,g="</div>",h="<div class='"+a.classes.holder+" "+a.classes.hidden+"' id='"+a.ids.holder+"'>",i=0;c>i;i++){h+="<div class='"+a.classes.itemHolder+"'>";for(var j=e*(i+1)-1,k=j-e>0?j-e+1:0,l=k;j>=l&&!(f>=d);l++)h+="<div class='"+this.classes.item+"' data-value="+a.getValue(f)+">"+a.htmlFormat(a.data[f])+g,f++;h+=g}h+=g,$(a.toId(a.ids.selectoid)).append(h)},Selectoid.prototype.generateButton=function(){$(this.toId(this.ids.selectoid)).append("<button class='"+this.classes.button+"' id='"+this.ids.button+"'></button>")},Selectoid.prototype.setButtonText=function(a){$(this.toId(this.ids.button)).html(a+"&nbsp;<div class='arrow-down float-right'></div>")},Selectoid.prototype.setButtonActions=function(){var a=this;$(a.toId(a.ids.button)).on("click",function(){$(a.toId(a.ids.holder)).removeClass(a.classes.hidden).focus()})},Selectoid.prototype.setDivActions=function(){var a=this,b=a.toClass(a.classes.holder),c=a.toClass(a.classes.item),d=c+a.toClass(a.classes.selected);$(a.toId(a.ids.selectoid)+" "+c).on("click",function(){$(b+" "+d).removeClass(a.classes.selected),$(this).addClass(a.classes.selected);var c=$(this).data("value"),e=a.getItemByValue(c);a.setButtonText(a.getName(e)),$(a.toId(a.ids.select)).val(c),$(a.toClass(a.classes.holder)).addClass(a.classes.hidden)})},Selectoid.prototype.setDivMouseLeaveAction=function(){var a=this.toId(this.ids.holder);$(a).on("mouseleave",function(){$(this).addClass("hidden")})},Selectoid.prototype.setDivFocusOutAction=function(){var a=this.toId(this.ids.holder);document.querySelector(a).tabIndex=1,$(a).on("focusout",function(){$(this).addClass("hidden")})},Selectoid.prototype.setInitialValues=function(){var a=this,b=$(a.toId(a.ids.select)),c=a.toClass(a.classes.holder),d=a.toClass(a.classes.item),e=d+a.toClass(a.classes.selected);if(a.initial=a.initial||b.val(),!_.isEmpty(a.initial)){var f;_.each(a.data,function(b,c){a.getValue(c)===a.initial&&(f=b)}),_.isEmpty(f)||(a.setButtonText(f.name),b.val(a.initial))}$(c+" "+e).removeClass(a.classes.selected),$.each($(a.toId(a.ids.holder)+" "+a.toClass(a.classes.item)),function(){$(this).data("value")===b.val()&&$(this).addClass(a.classes.selected)})},_.each([{name:"Class",value:"."},{name:"Id",value:"#"}],function(a){Selectoid.prototype["to"+a.name]=function(b){return a.value+b}}),a.Selectoid=Selectoid}.call(this,jQuery,_);